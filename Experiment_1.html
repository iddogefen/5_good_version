<!DOCTYPE html>
<html>
  <head>
    <script src="jspsych/jspsych.js"></script>
    <script src="jspsych-order.js"></script>
    <script src="jspsych/plugins/jspsych-html-button-response.js"></script>
    <script src="jspsych/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych/plugins/jspsych-html-button-response.js"></script>

    <script src="Tools/Functions.js"></script>
    <script src="Tools/jQuery.js"></script>
    <!--<script src="jspsych/plugins/jspsych-preload.js"></script>-->
    
    <link rel="stylesheet" href="jspsych/css/jspsych.css">
  </head>
  <body>
</body>
  <script>

function saveData(name, data){
  var xhr = new XMLHttpRequest();
  xhr.open('POST', 'write_data.php'); // 'write_data.php' is the path to the php file described above.
  xhr.setRequestHeader('Content-Type', 'application/json');
  xhr.send(JSON.stringify({filedata: data}));
}

// call the saveData function after the experiment is over
jsPsych.init({
   // code to define the experiment structure would go here...
   on_finish: function(){ saveData(jsPsych.data.get().csv()); }
});

var data_folder             = '../Data/Individual_data/'
var int_data_folder         = '../Data/Interactive_data/'
var tools_folder            = 'Tools'


    var timeline = [];
    var rts =[];
    var events = [];
    var subject = 1;

    // generate a random subject ID with 15 characters
var subject_id = Date.now();

// pick a random condition for the subject at the start of the experiment
var condition_assignment = jsPsych.randomization.sampleWithoutReplacement(['conditionA', 'conditionB', 'conditionC'], 1)[0];

// record the condition assignment in the jsPsych data
// this adds a property called 'subject' and a property called 'condition' to every trial
jsPsych.data.addProperties({
  subject: subject_id,
  condition: condition_assignment
});


    var trial_1 = {
      type: 'order',
      stimuli: ['1_1','1_2','1_3','1_4'],
      button_label:  'Continue when done',

    }
    timeline.push(trial_1);

    var trial_2 = {
      type: 'order',
      stimuli: ['1_5','1_6','1_7','1_8'],
      button_label:  'Continue when done',
  
    }
    timeline.push(trial_2);

  
    
    var trial_3 = {
      type: 'order',
      stimuli: ['2_1','2_2','2_3','2_4'],
      button_label:  'Continue when done',
  
    }
    timeline.push(trial_3);

    
    var trial_4 = {
      type: 'order',
      stimuli: ['2_5','2_6','2_7','2_8'],
      button_label:  'Continue when done',
  
    }
    timeline.push(trial_4);


        
    var trial_5 = {
      type: 'order',
      stimuli: ['3_1','3_2','3_3','3_4'],
      button_label:  'Continue when done',
  
    }
    timeline.push(trial_5);


            
    var trial_6 = {
      type: 'order',
      stimuli: ['3_5','3_6','3_7','3_8'],
      button_label:  'Continue when done',
  
    }
    timeline.push(trial_6);

                
    var trial_7 = {
      type: 'order',
      stimuli: ['4_1','4_2','4_3','4_4'],
      button_label:  'Continue when done',
  
    }
    timeline.push(trial_7);

    var trial_8 = {
      type: 'order',
      stimuli: ['4_5','4_6','4_7','4_8'],
      button_label:  'Continue when done',
  
    }
    timeline.push(trial_8);

    var trial_9 = {
      type: 'order',
      stimuli: ['5_1','5_2','5_3','5_4'],
      button_label:  'Continue when done',
  
    }
    timeline.push(trial_9);

    var trial_10 = {
      type: 'order',
      stimuli: ['5_5','5_6','5_7','5_8'],
      button_label:  'Continue when done',
  
    }
    timeline.push(trial_10);

    var trial_11 = {
      type: 'order',
      stimuli: ['6_1','6_2','6_3','6_4'],
      button_label:  'Continue when done',
  
    }
    timeline.push(trial_11);


    var trial_12 = {
      type: 'order',
      stimuli: ['6_5','6_6','6_7','6_8'],
      button_label:  'Continue when done',
  
    }
    timeline.push(trial_18);

    var trial_13 = {
      type: 'order',
      stimuli: ['7_1','7_2','7_3','7_4'],
      button_label:  'Continue when done',
  
    }
    timeline.push(trial_13);

    var trial_14 = {
      type: 'order',
      stimuli: ['7_5','7_6','7_7','7_8'],
      button_label:  'Continue when done',
  
    }
    timeline.push(trial_14);

    var trial_15 = {
      type: 'order',
      stimuli: ['8_1','8_2','8_3','8_4'],
      button_label:  'Continue when done',
  
    }
    timeline.push(trial_15);

    var trial_16 = {
      type: 'order',
      stimuli: ['8_5','8_6','8_7','8_8'],
      button_label:  'Continue when done',
  
    }
    timeline.push(trial_16);
    

    var trial_17 = {
      type: 'order',
      stimuli: ['9_1','9_2','9_3','9_4'],
      button_label:  'Continue when done',
  
    }
    timeline.push(trial_17);

    var trial_18 = {
      type: 'order',
      stimuli: ['9_5','9_6','9_7','9_8'],
      button_label:  'Continue when done',
  
    }
    timeline.push(trial_18);

    
    var trial_19 = {

    type: 'html-button-response',
    stimulus: '<p>How difficult was it to order the pictures?</p>',
    choices: ['very easy','easy', 'medium', 'hard', 'very hard'],
    prompt: "<p> </p>"
};
    timeline.push(trial_19);
    



    jsPsych.init({
      timeline: [trial_1,trial_2, trial_3,trial_4, trial_5, trial_6,trial_7, trial_8, trial_9,
      trial_10,trial_11,trial_12,trial_13,trial_14, trial_15, trial_16, trial_17, trial_18, trial_19],

      on_finish: function() {
        jsPsych.data.displayData();
          //save_local_data(data_folder+'All_data/all_data_sub_'+subject_id+".json", jsPsych.data.get().json());
          //save_local_data(int_data_folder+'int_data_sub_'+subject_id +".json", jsPsych.data.getInteractionData().json());
          //save_local_data_2(data_folder+'All_data/all_data_sub_'+subject_id+".json", jsPsych.data.get().json());
          //save_local_data_2(int_data_folder+'int_data_sub_'+subject_id +".json", jsPsych.data.getInteractionData().json());
          //save_server_data(data_folder+'All_data/all_data_sub_'+subject_id+".json", jsPsych.data.get().json());
          //save_server_data(int_data_folder+'int_data_sub_'+subject_id+".json", jsPsych.data.getInteractionData().json());
        }
      } // on_finish



    )
  </script>
</html>