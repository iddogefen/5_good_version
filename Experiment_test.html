<!DOCTYPE html>
<html>
  <head>
    <script src="jspsych/jspsych.js"></script>
    <script src="jspsych-order.js"></script>
    <script src="jspsych/plugins/jspsych-html-button-response.js"></script>
    <script src="jspsych/plugins/jspsych-instructions.js"></script>
    <script src="jspsych/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych/plugins/jspsych-survey-text.js"></script>
    <script src="Tools/Functions.js"></script>
    <script src="Tools/jQuery.js"></script>
    <!--<script src="jspsych/plugins/jspsych-preload.js"></script>-->


    <link rel="stylesheet" href="jspsych/css/jspsych.css">
  </head>
  <body>
</body>
  <script>
var data_folder             = 'data/Individual_data/'
var int_data_folder         = 'data/Interactive_data/'
var tools_folder            = 'Tools'

// generate a random subject ID with 15 characters
    var timeline = [];
    var rts =[];
    var events = [];
    // generate a random subject ID with 15 characters
var subject_id = new Date().toLocaleString();

// pick a random condition for the subject at the start of the experiment
var condition_assignment = jsPsych.randomization.sampleWithoutReplacement(['conditionA', 'conditionB', 'conditionC'], 1)[0];

// record the condition assignment in the jsPsych data
// this adds a property called 'subject' and a property called 'condition' to every trial
jsPsych.data.addProperties({
  subject: subject_id,
  condition: condition_assignment
});

var trial_1 = {
    type: 'instructions',
    pages: [
    'Welcome to the experiment. Click next to begin.',
    'In the upcoming experiment, you will need to arrange four different pictures in the correct order.',
    'Try in now.'
    ],
    show_clickable_nav: true
}
timeline.push(trial_1);

var trial_2 = {
  type: 'survey-text',
  questions: [
    {prompt: 'How old are you?'}
  ]
}
timeline.push(trial_2);

var trial_3 = {
    type: 'instructions',
    pages: [
    'Welcome to the experiment. Click next to begin.',
    'In the upcoming experiment, you will need to arrange four different pictures in the correct order.',
    'Try in now.' + '<img src="0_1.jpg" width="600" height="375"></img>'
    ],
    show_clickable_nav: true
}
timeline.push(trial_3);

var trial_4 = {

type: 'order',
stimuli: ['test_3','test_4','test_1','test_2'],
button_label:  'Continue when done',

}
timeline.push(trial_4);


var trial_5 = {
    type: 'instructions',
    pages: [
    'Excellent. Now, in your free time, start the experiment.'
    ],
    show_clickable_nav: true
}
timeline.push(trial_5);

    var trial_6 = {

      type: 'order',
      stimuli: ['2_5','2_6','2_7','2_8'],
      button_label:  'Continue when done',

    }
    timeline.push(trial_6);


    var trial_7 = {

type: 'html-button-response',
stimulus: '<p>How difficult was it to order the pictures?</p>',
choices: ['very easy','easy', 'medium', 'hard', 'very hard'],
prompt: "<p> </p>"


}
timeline.push(trial_7);


var trial_8 = {

  type: 'survey-text',
questions: [
{prompt: 'Briefly explain why you arranged the pictures in this order', rows: 4}
]
}
timeline.push(trial_8);

    var trial_9 = {

      type: 'order',
      stimuli: ['7_1','7_2','7_4','7_3'],
      button_label:  'Continue when done',
  

  
    }
    timeline.push(trial_9);

 

    jsPsych.init({
      timeline: [trial_1,trial_2, trial_3,trial_4, trial_5, trial_6, trial_7,trial_8, trial_9],
    
    on_finish: function() {
        jsPsych.data.displayData();
        saveData(data_folder+'All_data/all_data_sub_'+subject_id+".csv", jsPsych.data.get().json());
        jsPsych.data.get().localSave('csv',subject_id+'.csv');
  
        //save_local_data(data_folder+'All_data/all_data_sub_'+subject_id+".json", jsPsych.data.get().json());
          //save_local_data(int_data_folder+'int_data_sub_'+subject_id +".json", jsPsych.data.getInteractionData().json());
          //save_local_data_2(data_folder+'All_data/all_data_sub_'+subject_id+".json", jsPsych.data.get().json());
          //save_local_data_2(int_data_folder+'int_data_sub_'+subject_id +".json", jsPsych.data.getInteractionData().json());
          //save_server_data(data_folder+'All_data/all_data_sub_'+subject_id+".json", jsPsych.data.get().json());
          //save_server_data(int_data_folder+'int_data_sub_'+subject_id+".json", jsPsych.data.getInteractionData().json());
        } // on_finish


    })
  </script>
</html>